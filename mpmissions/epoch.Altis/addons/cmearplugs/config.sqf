//============================================
// cmEarplugs Script
// written by computermancer
// superfunserver.com
// Modified by glouton
//============================================

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

//					CHOOSE INSERT & REMOVE BEHAVIOR	

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// FIRST NUMBER : Choose how LONG it takes  until sound is REDUCED
// SECOND NUMBER:" Choose how LOUD the sound is when it is REDUCED
cmManMuteSound = {1 fadeSound 0.15;};

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//FIRST NUMBER : Choose how LONG it takes  until sound RETURNS
//SECOND NUMBER:" Choose how LOUD the sound is when it is done RETUNRNING
cmManReturnSound = {1 fadeSound 1;};

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//CHOOSE YOUR INSERT MESSAGE:
cmManMuteMessage = {
hint "You have inserted your earplugs.";
systemchat "You have inserted your earplugs.";
};

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//CHOOSE YOUR REMOVE MESSAGE:
cmManReturnSoundMsg = {
hint "You have removed your earplugs.";
systemchat "You have removed your earplugs.";
};

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// CHOOSE IF YOU WANT AUTOINSERT & AUTOREMOVE OF EARPLUGS:
InsertAutoEarplugs=true;
RemoveAutoEarplugs=true;

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

//					CHOOSE AUTO-INSERT & REMOVE BEHAVIOR

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// FIRST NUMBER : Choose how LONG it takes  until sound is REDUCED
// SECOND NUMBER:" CHoose how LOUD the sound is when it is REDUCED
cmMuteSound = {5 fadeSound 0.15;};

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//FIRST NUMBER : Choose how LONG it takes  until sound RETURNS
//SECOND NUMBER:" CHoose how LOUD the sound is when it is done RETUNRNING
cmReturnSound = {10 fadeSound 1;};

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//CHOOSE YOUR AUTO-INSERT MESSAGE
cmMuteMessage = {
hint "Earplugs have been auto-inserted...";
systemchat "Earplugs have been auto-inserted...";
};

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//CHOOSE YOUR AUTO-REMOVE MESSAGE
cmReturnSoundMsg = {
hint "Earplugs have been auto-removed.";
systemchat "Earplugs have been auto-removed.";
};

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//					END CONFIGURABLES
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//DO NOT EDIT BELOW THIS LINE UNLESS YOU KNOW WHAT YOU ARE DOING
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

cm_EP_LOOP = {
	while {true} do {
		waitUntil {uisleep 0.5; vehicle player != player};
		if (InsertAutoEarplugs) then {
			if (earplugsout) then {
				[] call cmMuteSound;
				[] call cmMuteMessage;
				earplugsout=false;
			};
		};

		waitUntil {uisleep 0.5; vehicle player == player};
		if (RemoveAutoEarplugs) then {
			if (!earplugsout) then {
				[] call cmReturnSound;
				[] call cmReturnSoundMsg;
				earplugsout=true;
			};
		};
	};
};

cm_Earplugs_FUNc = {
	if (earplugsout) then {
		[] call cmManMuteMessage;
		[] call cmManMuteSound;
		earplugsout=false;
	} else {
		[] call cmManReturnSoundMsg;
		[] call cmManReturnSound;
		earplugsout=true;
	};
};
